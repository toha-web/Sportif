import images from"./images.js";const menuBtn=document.querySelector(".mobile_menu-btn"),menu=document.querySelector(".mobile_menu");menuBtn.addEventListener("click",(function(){menuBtn.classList.toggle("active"),menu.classList.toggle("active")})),window.addEventListener("DOMContentLoaded",(()=>{if(window.location.pathname.includes("catalog")){const e=window.innerWidth,[...t]=document.querySelectorAll(".filter_title");e<=991&&t.forEach((e=>{e.classList.remove("active"),e.nextElementSibling.classList.add("disabled")}));for(let e=0;e<colorsSource.length;e++)setFilterColors(colorsSource[e]);for(let e=0;e<sizesSource.length;e++)setFilterSizes(sizesSource[e]);for(let e=0;e<brandSource.length;e++)setFilterBrand(brandSource[e]);showCatalog(productList,currentPage)}window.location.pathname.includes("catalog")||showPrewCards(),getCart()})),document.addEventListener("click",(e=>{if("filter_title"===e.target.classList[0]){const t=e.target,n=t.nextElementSibling;t.classList.toggle("active"),n.classList.toggle("disabled")}else if("reset"===e.target.className){if(filteredList.length>0||document.querySelector(".empty")){const[...e]=document.querySelectorAll(".filter form"),t=document.querySelectorAll(".filter form > label");currentPage=1,filteredList=[],e.forEach((e=>{e.reset()})),t.forEach((e=>{e.classList.remove("checked")})),showCatalog(productList,currentPage)}}else if("radio"===e.target.type)for(let t=0;t<e.target.parentElement.length;t++)e.target.parentElement.elements[t].checked?e.target.parentElement.elements[t].nextElementSibling.classList.add("checked"):e.target.parentElement.elements[t].nextElementSibling.classList.remove("checked");else if(e.target.classList.contains("p_button")){const t=document.querySelector(".pagination"),n=document.querySelector(".arrow_prew"),r=document.querySelector(".arrow_next");if(e.target.classList.contains("active"))e.preventDefault();else{if(e.target.classList.contains("arrow_prew")||e.target.classList.contains("arrow_next")){if(e.target.classList.contains("arrow_prew")){r.style.display="flex";for(let r=1;r<t.children.length-1;r++)if(t.children[r].classList.contains("active")&&e.target!==t.children[r-1]){t.children[r-1].classList.add("active"),t.children[r].classList.remove("active"),e.target===t.children[r-2]&&(n.style.display="none");break}}else if(e.target.classList.contains("arrow_next")){n.style.display="flex";for(let n=t.children.length-1;n>0;n--)if(t.children[n].classList.contains("active")&&e.target!==t.children[n+1]){t.children[n+1].classList.add("active"),t.children[n].classList.remove("active"),e.target===t.children[n+2]&&(r.style.display="none");break}}}else{for(let e=0;e<t.children.length;e++)t.children[e].classList.remove("active");e.target.classList.add("active"),+e.target.innerText>1?(n.style.display="flex",+e.target.innerText===pagesCount?r.style.display="none":+e.target.innerText<pagesCount&&(r.style.display="flex")):1==+e.target.innerText&&(n.style.display="none",r.style.display="flex")}for(let e=0;e<t.children.length;e++)t.children[e].classList.contains("active")&&(currentPage=+t.children[e].innerText,filteredList.length>0?showCatalog(filteredList,currentPage):0===filteredList.length&&showCatalog(productList,currentPage))}}}));let startTime=null;function scrollToTop(e){startTime||(startTime=e);let t=e-startTime;startTime=e;const n=500/(1e3/t)*15;window.scrollBy(0,-n);let r=window.requestAnimationFrame(scrollToTop);0===window.scrollY&&window.cancelAnimationFrame(r),document.addEventListener("wheel",(()=>{window.cancelAnimationFrame(r)}))}function createModal(e){bodyFreeze();const t=document.createElement("div");t.className="modal";const n=document.createElement("div");n.className="product";const r=document.createElement("div");r.className="product_image";const c=document.createElement("div");c.className="full_img";const a=document.createElement("img");a.setAttribute("src",`${e.image}`),a.setAttribute("alt",`Шорты ${e.title}`),c.append(a);const o=document.createElement("div");o.className="small_imgs";const l=document.createElement("div");l.className="small_img";const i=document.createElement("img");i.setAttribute("src",`${e.image}`),i.setAttribute("alt",`Шорты ${e.title}`),l.append(i),o.append(l),r.append(c),r.append(o);const s=document.createElement("div");s.className="product_info";const d=document.createElement("div");d.className="product_title";const u=document.createElement("span");u.innerText=`ITEM # 0523 - ${e.id}`,d.append(`${e.title} Original Short `,u);const m=document.createElement("div");m.className="product_rate";const p=document.createElement("div");p.className="rate_stars";for(let t=0;t<e.rate;t++){const e=document.createElement("img");e.setAttribute("src","../img/star-yellow.svg"),e.setAttribute("alt","Rate Star"),p.append(e)}const g=document.createElement("span");g.innerText=`${Math.floor(100*Math.random())} Reviews`,m.append(p),m.append(g);const f=document.createElement("div");f.className="product_price";const h=document.createElement("span");h.innerText="As low as ";const b=document.createElement("div");b.className="price",b.innerText=`$${e.price}`,f.append(h),f.append(b);const E=document.createElement("div");E.className="product_colors";const v=document.createElement("span");v.innerText="Color:";const L=document.createElement("form");L.className="mcolors",L.setAttribute("autocomplete","off");for(let t=0;t<e.color.length;t++){const n=document.createElement("input");n.setAttribute("type","radio"),n.setAttribute("name","mcolor"),n.setAttribute("id",`m${e.id}-${e.color[t]}`),n.setAttribute("value",`${e.color[t]}`);const r=document.createElement("label");r.className="color",r.setAttribute("for",`m${e.id}-${e.color[t]}`),r.style.backgroundColor=e.color[t],L.append(n),L.append(r),n.value===e.selectColor&&(n.checked=!0,n.nextElementSibling.classList.add("checked"))}E.append(v),E.append(L);const S=document.createElement("div");S.className="product_size";const y=document.createElement("span");y.innerText="Size:";const w=document.createElement("form");w.className="sizes";for(let t=0;t<e.size.length;t++){const n=document.createElement("input");n.setAttribute("type","radio"),n.setAttribute("name","size"),n.setAttribute("id",`${e.id}-${e.size[t]}`),n.setAttribute("value",`${e.size[t]}`);const r=document.createElement("label");r.className="size",r.setAttribute("for",`${e.id}-${e.size[t]}`),r.innerText=`${e.size[t]}`,w.append(n),w.append(r),0===t&&(n.checked=!0,n.nextElementSibling.classList.add("checked"))}S.append(y),S.append(w);const A=document.createElement("div");A.className="product_add_btns";const C=document.createElement("button");C.className="add-to-bag",C.innerText="Add to bag";const x=document.createElement("button");x.className="add-to-wish",x.innerText="Add to wishlist",A.append(C),A.append(x);const T=document.createElement("div");T.className="product_social";const _=document.createElement("img");_.setAttribute("src","../img/fb.svg"),_.setAttribute("alt","Facebook");const N=document.createElement("img");N.setAttribute("src","../img/twitter.svg"),N.setAttribute("alt","Twitter");const $=document.createElement("img");$.setAttribute("src","../img/pinterest.svg"),$.setAttribute("alt","Pinterest");const z=document.createElement("img");z.setAttribute("src","../img/link.svg"),z.setAttribute("alt","Link"),T.append(_),T.append(N),T.append($),T.append(z);const q=document.createElement("div");q.className="product_free";const k=document.createElement("div");k.className="free_title",k.innerText="- Worry Free Shopping -";const P=document.createElement("hr"),M=document.createElement("div");M.className="free_items";const F=document.createElement("div");F.className="shipping",F.innerText="FREE PRIORITY SHIPPING ON ORDERS $99+*";const R=document.createElement("div");return R.className="exchange",R.innerText="FREE RETURNS & EXCHANGES*",M.append(F),M.append(R),q.append(k),q.append(P),q.append(M),s.append(d),s.append(m),s.append(f),s.append(E),s.append(S),s.append(A),s.append(T),s.append(q),n.append(r),n.append(s),t.append(n),t.addEventListener("click",(n=>{if("radio"===n.target.type)for(let t=0;t<n.target.parentElement.length;t++)"mcolor"===n.target.name?e.selectColor=n.target.value:"size"===n.target.name&&(e.selectSize=n.target.value);else"add-to-bag"===n.target.className?(cartList.push(structuredClone(e)),saveCart(cartList),createCartIcon(),t.remove(),bodyUnFreeze()):"add-to-bag"!==n.target.className&&"label"!==n.target.localName&&(t.remove(),bodyUnFreeze())})),t}function modal(){const[...e]=document.querySelectorAll(".card");e.forEach((e=>{const t=document.querySelector(".wrapper");let n=parseInt(e.id.slice(1));productList[n].selectColor=e.currentColor,productList[n].selectSize=e.currentSize,e.addEventListener("click",(e=>{"radio"===e.target.type?productList[n].selectColor=e.target.value:"add_btn"===e.target.className?(cartList.push(structuredClone(productList[n])),saveCart(cartList),createCartIcon()):"card"===e.target.className&&t.append(createModal(productList[n]))}))}))}document.addEventListener("scroll",(()=>{const e=document.querySelector(".up");window.scrollY>500?(e.classList.remove("disabled"),e.addEventListener("click",scrollToTop)):window.scrollY<500&&e.classList.add("disabled")}));class Product{constructor(e){this.id=e,this.image=images[e],this.title=getTitle(e),this.rate=getRate(),this.price=getPrice(),this.color=getColor(),this.size=getSize()}}const sizesSource=[36,38,40,42,44,46,48,50,52,54,56,58,60,62,66,70],colorsSource=["beige","blue","darkred","violet","white","yellow","green","coral","brown","orange","pink"];function getPrice(){return Math.floor(350+410*Math.random())}function getSize(){let e=Math.round(3.5+(10*Math.random()+1.5)/3),t=[];for(;e>0;e--){let e=Math.floor(Math.random()*sizesSource.length);t.includes(sizesSource[e])||t.push(sizesSource[e])}return t.sort(((e,t)=>e-t))}function getRate(){return Math.round(2.5+2.5*Math.random())}function getColor(){let e=Math.round(2.5+(10*Math.random()+1.5)/3),t=[];for(;e>0;e--){let e=Math.floor(Math.random()*colorsSource.length);t.includes(colorsSource[e])||t.push(colorsSource[e])}return t}function getTitle(e){if(e<brandSource.length)return brandSource[e];if(e>=brandSource.length){let t=Math.floor(e/brandSource.length);return brandSource[e-brandSource.length*t]}}const brandSource=["Feel and Fly","HiBrand","Exclusive","Aeropostale","Without","Роза","Benetton","DEFACTO","AGER","Love&Live","QUIK SILVER","Levi's","Custom Wear","GAP","Esprit","Promin","H&M","C&A","Tommy Hilfiger","Daniel Hechter","Errea","Old Navy","Banana Republic","Koton","Pit Bull","Angelo litrico","American giant","THE SMURFS","MTP","Diesel","Cos","Kiabi","Weekday","Calvin Klein","Clockhouse"];function setFilterSizes(e){const t=document.querySelector(".filter_size form"),n=document.createElement("input");n.setAttribute("type","radio"),n.setAttribute("name","size"),n.setAttribute("id",`filter-${e}`),n.setAttribute("value",`${e}`);const r=document.createElement("label");r.setAttribute("for",`${n.id}`);const c=document.createElement("span");c.innerText=e,r.appendChild(c),t.appendChild(n),t.appendChild(r),n.addEventListener("change",(()=>{filtering(),window.innerWidth<=991&&(document.querySelector(".filter_size .filter_title").classList.toggle("active"),document.querySelector(".filter_size .filter_title").nextElementSibling.classList.toggle("disabled"))}))}function setFilterColors(e){const t=document.querySelector(".filter_color form"),n=document.createElement("input");n.setAttribute("type","radio"),n.setAttribute("name","color"),n.setAttribute("id",`filter-${e}`),n.setAttribute("value",`${e}`);const r=document.createElement("label");r.setAttribute("for",`${n.id}`);const c=document.createElement("span");c.style.backgroundColor=e,r.appendChild(c),t.appendChild(n),t.appendChild(r),n.addEventListener("change",(()=>{filtering(),window.innerWidth<=991&&(document.querySelector(".filter_color .filter_title").classList.toggle("active"),document.querySelector(".filter_color .filter_title").nextElementSibling.classList.toggle("disabled"))}))}function setFilterBrand(e){const t=document.querySelector(".filter_brand form"),n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("name","brand"),n.setAttribute("id",`filter-${e}`),n.setAttribute("value",`${e}`);const r=document.createElement("label");r.setAttribute("for",`${n.id}`),r.innerText=e,t.appendChild(n),t.appendChild(r),n.addEventListener("change",(()=>{filtering()}))}function createCard(e,t){const n=document.createElement("div");n.className="card";const r=document.createElement("div");r.className="card_image";const c=document.createElement("img");c.setAttribute("src",e.image),c.setAttribute("alt",`Шорты ${e.title}`),r.append(c);const a=document.createElement("div");a.className="card_title",a.innerText=`${e.title}`;const o=document.createElement("div");o.className="card_rate";for(let n=0;n<e.rate;n++){const e=document.createElement("img");t?e.setAttribute("src","../img/star-yellow.svg"):e.setAttribute("src","./img/star-yellow.svg"),e.setAttribute("alt","Rate"),o.append(e)}const l=document.createElement("div");l.className="price";const i=document.createElement("span");i.innerText="As low as ",l.append(i,`$${e.price}`);const s=document.createElement("div");s.className="color";const d=document.createElement("form");d.setAttribute("autocomplete","off"),s.append(d);for(let t=0;t<e.color.length;t++){const n=document.createElement("input");n.setAttribute("type","radio"),n.setAttribute("name","color"),n.setAttribute("id",`${e.id}-${e.color[t]}`),n.setAttribute("value",`${e.color[t]}`);const r=document.createElement("label");r.setAttribute("for",`${e.id}-${e.color[t]}`);const c=document.createElement("span");c.style.backgroundColor=e.color[t],r.append(c),d.append(n),d.append(r),0===t&&(n.checked=!0,n.nextElementSibling.classList.add("checked"))}const u=document.createElement("div");return u.className="add_btn",u.innerText="Add to cart",n.append(r),n.append(a),n.append(o),n.append(l),t&&n.append(s),n.append(u),n.setAttribute("id",`c${e.id}`),n.currentColor=e.color[0],n.currentSize=e.size[0],n}const productList=[];for(let e=0;e<images.length;e++)productList.push(new Product(e));let filteredList=[];function showCatalog(e,t){scrollToTop();const n=document.querySelector(".catalog .cards");pagesCount=Math.ceil(e.length/itemsOnPage),createPageButtons(pagesCount,t),n.replaceChildren();for(let t=0;t<itemsOnPage&&e[itemsOnPage*(currentPage-1)+t];t++)n.append(createCard(e[itemsOnPage*(currentPage-1)+t],1));modal()}function filtering(){const e=document.querySelector(".catalog .cards"),[...t]=document.querySelectorAll(".filter_size input"),[...n]=document.querySelectorAll(".filter_color input"),[...r]=document.querySelectorAll(".filter_brand input");let c,a,o=[];if(t.forEach((e=>{!0===e.checked&&(c=+e.value)})),n.forEach((e=>{!0===e.checked&&(a=e.value)})),r.forEach((e=>{e.checked&&o.push(e.value)})),o.length>0){const e=productList.filter((e=>o.find((t=>{if(e.title===t)return e}))));filteredList=a&&!c?e.filter((e=>e.color.includes(a))):!a&&c?e.filter((e=>e.size.includes(c))):a&&c?e.filter((e=>e.color.includes(a)&&e.size.includes(c))):e}else a&&!c?filteredList=productList.filter((e=>e.color.includes(a))):!a&&c?filteredList=productList.filter((e=>e.size.includes(c))):a&&c&&(filteredList=productList.filter((e=>e.color.includes(a)&&e.size.includes(c))));if(currentPage=1,filteredList.length>0)showCatalog(filteredList,currentPage);else{scrollToTop(),e.replaceChildren();const t=document.createElement("div");t.className="empty",t.innerText="Sorry, no products were found matching your request, try changing your filtering.",e.append(t)}}function showPrewCards(){const e=document.querySelector(".catalog_prew .cards");let t=[];for(let n=0;n<4;n++){let n=Math.floor(Math.random()*productList.length);if(t.includes(productList[n])){if(t.includes(productList[n]))continue}else t.push(productList[n]),e.append(createCard(productList[n]))}modal()}let cartList=[];function showCart(){bodyFreeze();const e=document.querySelector(".wrapper"),t=document.createElement("div");t.className="modal";const n=document.createElement("div");n.className="cart";const r=document.createElement("h2");r.innerText="Ваши покупки:";const c=document.createElement("table"),a=document.createElement("thead");a.insertAdjacentHTML("afterbegin","<tr><td></td><td>Товар</td><td>Размер</td><td>Цвет</td><td>Цена</td><td>Удалить</td></tr>"),c.append(a),c.append(createCartBody(t)),n.append(r),n.append(c),t.append(n),e.append(t),t.addEventListener("click",(e=>{"close"!==e.target.className&&(t.remove(),bodyUnFreeze())}))}function createCartBody(e){const t=document.createElement("tbody");return cartList.forEach(((n,r)=>{const c=document.createElement("tr");c.insertAdjacentHTML("afterbegin",`\n\t\t<td><img src="${n.image}" alt="${n.title}"></td>\n\t\t<td><p>${n.title}</p></td>\n\t\t<td><p>${n.selectSize}</p></td>\n\t\t<td><p>${n.selectColor}</p></td>\n\t\t<td><p>$${n.price}</p></td>\n\t\t`);const a=document.createElement("td"),o=document.createElement("img");o.className="close",window.location.pathname.includes("catalog")?o.setAttribute("src","../img/close.png"):o.setAttribute("src","./img/close.png"),o.setAttribute("alt","Delete"),a.append(o),c.append(a),t.append(c),a.addEventListener("click",(()=>{cartList.length>1?(cartList.splice(r,1),saveCart(cartList),e.remove(),showCart(),createCartIcon()):1===cartList.length&&(cartList.length=0,e.remove(),bodyUnFreeze(),document.querySelector(".cart_icon").remove(),localStorage.clear())}))})),t}function createCartIcon(){let e;document.querySelector(".cart_icon")&&document.querySelector(".cart_icon").remove();const t=document.createElement("div");t.className="cart_icon";const n=document.createElement("img");window.location.pathname.includes("catalog")?n.setAttribute("src","../img/cart2.png"):n.setAttribute("src","./img/cart2.png"),n.setAttribute("alt","Cart Icon");const r=document.createElement("span");r.innerText=`${cartList.length}`,t.append(n),t.append(r),window.innerWidth>620||!location.pathname.includes("catalog")?e=document.querySelector("header .container"):window.innerWidth<620&&location.pathname.includes("catalog")&&(e=document.querySelector(".breadcrumbs"),t.style.height="35px",t.style.width="35px"),e.append(t),t.addEventListener("click",(()=>{showCart()}))}let pagesCount,itemsOnPage=10,currentPage=1;function createPageButtons(e,t){const n=document.querySelector(".pagination");n.replaceChildren();for(let r=0;r<e+2;r++){const c=document.createElement("button");c.className="p_button",0===r?c.classList.add("arrow_prew"):r===t?(c.innerText=r,c.classList.add("active"),t>1&&(document.querySelector(".arrow_prew").style.display="flex")):r===e+2-1?(c.classList.add("arrow_next"),t===e&&(c.style.display="none")):c.innerText=r,n.append(c)}}function saveCart(e){localStorage.setItem("cart",JSON.stringify(e))}function getCart(){localStorage.length>0&&(cartList=JSON.parse(localStorage.cart),createCartIcon())}function search(e,t,n,r){productList.filter((c=>{Object.values(c).flat().forEach((a=>{a.toString().toLowerCase().includes(t.toString().toLowerCase())&&showSearchResult(e,c,n,r++)}))}))}function showSearchResult(e,t,n,r){if(r>9)return;const c=e.nextElementSibling,a=document.createElement("div");a.className="result_item",a.classList.add(n);const o=document.createElement("div");o.className="res_img";const l=document.createElement("img");l.src=t.image,l.alt=t.title,o.append(l);const i=document.createElement("div");i.innerText=`${t.title}`;const s=document.createElement("div");s.innerText=`${t.size[0]} - ${t.size.at(-1)}`;const d=document.createElement("div");d.innerText="Various";const u=document.createElement("div");u.innerText=`$${t.price}`,a.append(o),a.append(i),"bg"===n&&(a.append(s),a.append(d)),a.append(u),c.append(a),a.addEventListener("click",(()=>{document.querySelector(".wrapper").append(createModal(t))}))}function bodyFreeze(){document.querySelector("body").classList.add("freeze")}function bodyUnFreeze(){document.querySelector("body").classList.remove("freeze")}document.addEventListener("input",(e=>{if("search"===e.target.type){const t=e.target;if(t.addEventListener("blur",(()=>{setTimeout((()=>{t.nextElementSibling.replaceChildren(),t.nextElementSibling.classList.add("disabled"),t.value=""}),200)})),""===t.value)t.nextElementSibling.replaceChildren(),t.nextElementSibling.classList.add("disabled");else{t.nextElementSibling.replaceChildren(),t.nextElementSibling.classList.remove("disabled");let e=0;search(t,t.value,t.dataset.flag,e)}}}));